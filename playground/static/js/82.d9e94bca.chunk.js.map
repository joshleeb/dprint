{"version":3,"sources":["../../src/utils.ts","../../src/diff.tsx","../../src/editor.tsx"],"names":["processSize","size","editor","MonacoEditor","prototype","componentDidUpdate","_a"],"mappings":"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","file":"static/js/82.d9e94bca.chunk.js","sourcesContent":["export function processSize(size) {\n    return !/^\\d+$/.test(size) ? size : size + \"px\";\n}\nexport function noop() { }\n//# sourceMappingURL=utils.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as monaco from \"monaco-editor/esm/vs/editor/editor.api\";\nimport * as PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport { noop, processSize } from \"./utils\";\nvar MonacoDiffEditor = /** @class */ (function (_super) {\n    __extends(MonacoDiffEditor, _super);\n    function MonacoDiffEditor(props) {\n        var _this = _super.call(this, props) || this;\n        _this.assignRef = function (component) {\n            _this.containerElement = component;\n        };\n        _this.containerElement = undefined;\n        return _this;\n    }\n    MonacoDiffEditor.prototype.componentDidMount = function () {\n        this.initMonaco();\n    };\n    MonacoDiffEditor.prototype.componentDidUpdate = function (prevProps) {\n        var _a = this.props, language = _a.language, theme = _a.theme, height = _a.height, options = _a.options, width = _a.width, className = _a.className;\n        var _b = this.editor.getModel(), original = _b.original, modified = _b.modified;\n        if (this.props.original !== original.getValue()) {\n            original.setValue(this.props.original);\n        }\n        if (this.props.value != null && this.props.value !== modified.getValue()) {\n            this.__prevent_trigger_change_event = true;\n            // modifiedEditor is not in the public API for diff editors\n            this.editor.getModifiedEditor().pushUndoStop();\n            // pushEditOperations says it expects a cursorComputer, but doesn't seem to need one.\n            // @ts-expect-error\n            modified.pushEditOperations([], [\n                {\n                    range: modified.getFullModelRange(),\n                    text: this.props.value,\n                },\n            ]);\n            // modifiedEditor is not in the public API for diff editors\n            this.editor.getModifiedEditor().pushUndoStop();\n            this.__prevent_trigger_change_event = false;\n        }\n        if (prevProps.language !== language) {\n            monaco.editor.setModelLanguage(original, language);\n            monaco.editor.setModelLanguage(modified, language);\n        }\n        if (prevProps.theme !== theme) {\n            monaco.editor.setTheme(theme);\n        }\n        if (this.editor &&\n            (width !== prevProps.width || height !== prevProps.height)) {\n            this.editor.layout();\n        }\n        if (prevProps.options !== options) {\n            this.editor.updateOptions(__assign(__assign({}, (className ? { extraEditorClassName: className } : {})), options));\n        }\n    };\n    MonacoDiffEditor.prototype.componentWillUnmount = function () {\n        this.destroyMonaco();\n    };\n    MonacoDiffEditor.prototype.editorWillMount = function () {\n        var editorWillMount = this.props.editorWillMount;\n        var options = editorWillMount(monaco);\n        return options || {};\n    };\n    MonacoDiffEditor.prototype.editorDidMount = function (editor) {\n        var _this = this;\n        this.props.editorDidMount(editor, monaco);\n        var modified = editor.getModel().modified;\n        this._subscription = modified.onDidChangeContent(function (event) {\n            if (!_this.__prevent_trigger_change_event) {\n                _this.props.onChange(modified.getValue(), event);\n            }\n        });\n    };\n    MonacoDiffEditor.prototype.initModels = function (value, original) {\n        var language = this.props.language;\n        var originalModel = monaco.editor.createModel(original, language);\n        var modifiedModel = monaco.editor.createModel(value, language);\n        this.editor.setModel({\n            original: originalModel,\n            modified: modifiedModel,\n        });\n    };\n    MonacoDiffEditor.prototype.initMonaco = function () {\n        var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n        var _a = this.props, original = _a.original, theme = _a.theme, options = _a.options, overrideServices = _a.overrideServices, className = _a.className;\n        if (this.containerElement) {\n            // Before initializing monaco editor\n            this.editorWillMount();\n            this.editor = monaco.editor.createDiffEditor(this.containerElement, __assign(__assign(__assign({}, (className ? { extraEditorClassName: className } : {})), options), (theme ? { theme: theme } : {})), overrideServices);\n            // After initializing monaco editor\n            this.initModels(value, original);\n            this.editorDidMount(this.editor);\n        }\n    };\n    MonacoDiffEditor.prototype.destroyMonaco = function () {\n        if (this.editor) {\n            this.editor.dispose();\n            var _a = this.editor.getModel(), original = _a.original, modified = _a.modified;\n            if (original) {\n                original.dispose();\n            }\n            if (modified) {\n                modified.dispose();\n            }\n        }\n        if (this._subscription) {\n            this._subscription.dispose();\n        }\n    };\n    MonacoDiffEditor.prototype.render = function () {\n        var _a = this.props, width = _a.width, height = _a.height;\n        var fixedWidth = processSize(width);\n        var fixedHeight = processSize(height);\n        var style = {\n            width: fixedWidth,\n            height: fixedHeight,\n        };\n        return (React.createElement(\"div\", { ref: this.assignRef, style: style, className: \"react-monaco-editor-container\" }));\n    };\n    MonacoDiffEditor.propTypes = {\n        width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        original: PropTypes.string,\n        value: PropTypes.string,\n        defaultValue: PropTypes.string,\n        language: PropTypes.string,\n        theme: PropTypes.string,\n        options: PropTypes.object,\n        overrideServices: PropTypes.object,\n        editorDidMount: PropTypes.func,\n        editorWillMount: PropTypes.func,\n        onChange: PropTypes.func,\n        className: PropTypes.string,\n    };\n    MonacoDiffEditor.defaultProps = {\n        width: \"100%\",\n        height: \"100%\",\n        original: null,\n        value: null,\n        defaultValue: \"\",\n        language: \"javascript\",\n        theme: null,\n        options: {},\n        overrideServices: {},\n        editorDidMount: noop,\n        editorWillMount: noop,\n        onChange: noop,\n        className: null,\n    };\n    return MonacoDiffEditor;\n}(React.Component));\nexport default MonacoDiffEditor;\n//# sourceMappingURL=diff.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as monaco from \"monaco-editor/esm/vs/editor/editor.api\";\nimport * as PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport { noop, processSize } from \"./utils\";\nvar MonacoEditor = /** @class */ (function (_super) {\n    __extends(MonacoEditor, _super);\n    function MonacoEditor(props) {\n        var _this = _super.call(this, props) || this;\n        _this.assignRef = function (component) {\n            _this.containerElement = component;\n        };\n        _this.containerElement = undefined;\n        return _this;\n    }\n    MonacoEditor.prototype.componentDidMount = function () {\n        this.initMonaco();\n    };\n    MonacoEditor.prototype.componentDidUpdate = function (prevProps) {\n        var _a = this.props, value = _a.value, language = _a.language, theme = _a.theme, height = _a.height, options = _a.options, width = _a.width, className = _a.className;\n        var editor = this.editor;\n        var model = editor.getModel();\n        if (this.props.value != null && this.props.value !== model.getValue()) {\n            this.__prevent_trigger_change_event = true;\n            this.editor.pushUndoStop();\n            // pushEditOperations says it expects a cursorComputer, but doesn't seem to need one.\n            // @ts-expect-error\n            model.pushEditOperations([], [\n                {\n                    range: model.getFullModelRange(),\n                    text: value,\n                },\n            ]);\n            this.editor.pushUndoStop();\n            this.__prevent_trigger_change_event = false;\n        }\n        if (prevProps.language !== language) {\n            monaco.editor.setModelLanguage(model, language);\n        }\n        if (prevProps.theme !== theme) {\n            monaco.editor.setTheme(theme);\n        }\n        if (editor && (width !== prevProps.width || height !== prevProps.height)) {\n            editor.layout();\n        }\n        if (prevProps.options !== options) {\n            // Don't pass in the model on update because monaco crashes if we pass the model\n            // a second time. See https://github.com/microsoft/monaco-editor/issues/2027\n            var _model = options.model, optionsWithoutModel = __rest(options, [\"model\"]);\n            editor.updateOptions(__assign(__assign({}, (className ? { extraEditorClassName: className } : {})), optionsWithoutModel));\n        }\n    };\n    MonacoEditor.prototype.componentWillUnmount = function () {\n        this.destroyMonaco();\n    };\n    MonacoEditor.prototype.destroyMonaco = function () {\n        if (this.editor) {\n            this.editor.dispose();\n            var model = this.editor.getModel();\n            if (model) {\n                model.dispose();\n            }\n        }\n        if (this._subscription) {\n            this._subscription.dispose();\n        }\n    };\n    MonacoEditor.prototype.initMonaco = function () {\n        var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n        var _a = this.props, language = _a.language, theme = _a.theme, overrideServices = _a.overrideServices, className = _a.className;\n        if (this.containerElement) {\n            // Before initializing monaco editor\n            var options = __assign(__assign({}, this.props.options), this.editorWillMount());\n            this.editor = monaco.editor.create(this.containerElement, __assign(__assign(__assign({ value: value, language: language }, (className ? { extraEditorClassName: className } : {})), options), (theme ? { theme: theme } : {})), overrideServices);\n            // After initializing monaco editor\n            this.editorDidMount(this.editor);\n        }\n    };\n    MonacoEditor.prototype.editorWillMount = function () {\n        var editorWillMount = this.props.editorWillMount;\n        var options = editorWillMount(monaco);\n        return options || {};\n    };\n    MonacoEditor.prototype.editorDidMount = function (editor) {\n        var _this = this;\n        this.props.editorDidMount(editor, monaco);\n        this._subscription = editor.onDidChangeModelContent(function (event) {\n            if (!_this.__prevent_trigger_change_event) {\n                _this.props.onChange(editor.getValue(), event);\n            }\n        });\n    };\n    MonacoEditor.prototype.render = function () {\n        var _a = this.props, width = _a.width, height = _a.height;\n        var fixedWidth = processSize(width);\n        var fixedHeight = processSize(height);\n        var style = {\n            width: fixedWidth,\n            height: fixedHeight,\n        };\n        return (React.createElement(\"div\", { ref: this.assignRef, style: style, className: \"react-monaco-editor-container\" }));\n    };\n    MonacoEditor.propTypes = {\n        width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        value: PropTypes.string,\n        defaultValue: PropTypes.string,\n        language: PropTypes.string,\n        theme: PropTypes.string,\n        options: PropTypes.object,\n        overrideServices: PropTypes.object,\n        editorDidMount: PropTypes.func,\n        editorWillMount: PropTypes.func,\n        onChange: PropTypes.func,\n        className: PropTypes.string,\n    };\n    MonacoEditor.defaultProps = {\n        width: \"100%\",\n        height: \"100%\",\n        value: null,\n        defaultValue: \"\",\n        language: \"javascript\",\n        theme: null,\n        options: {},\n        overrideServices: {},\n        editorDidMount: noop,\n        editorWillMount: noop,\n        onChange: noop,\n        className: null,\n    };\n    return MonacoEditor;\n}(React.Component));\nexport default MonacoEditor;\n//# sourceMappingURL=editor.js.map"],"sourceRoot":""}