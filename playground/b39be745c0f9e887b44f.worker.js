!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/playground/",n(n.s=1)}([function(e,t,n){"use strict";function r(){return{dprint:{host_clear_bytes:function(){},host_read_buffer:function(){},host_write_buffer:function(){},host_take_file_path:function(){},host_take_override_config:function(){},host_format:function(){return 0},host_get_formatted_text:function(){return 0},host_get_error_text:function(){return 0}}}}function o(e){var t=new WebAssembly.Module(e);return i(new WebAssembly.Instance(t,{dprint:{host_clear_bytes:function(){},host_read_buffer:function(){},host_write_buffer:function(){},host_take_file_path:function(){},host_take_override_config:function(){},host_format:function(){return 0},host_get_formatted_text:function(){return 0},host_get_error_text:function(){return 0}}}))}function i(e){var t=e.exports,n=t.get_plugin_schema_version,r=t.set_file_path,o=t.set_override_config,i=t.get_formatted_text,a=t.format,f=t.get_error_text,u=t.get_plugin_info,c=t.get_resolved_config,s=t.get_config_diagnostics,_=t.set_global_config,l=t.set_plugin_config,g=t.get_license_text,d=t.get_wasm_memory_buffer,h=t.get_wasm_memory_buffer_size,m=t.add_to_shared_bytes_from_buffer,p=t.set_buffer_with_shared_bytes,b=t.clear_shared_bytes,y=t.reset_config,v=n();if(2!==v&&3!==v)throw new Error("Not compatible plugin. "+"Expected schema ".concat(3,", ")+"but plugin had ".concat(v,"."));var x=h(),w=!1;return{setConfig:function(e,t){O(e,t)},getConfigDiagnostics:function(){P();var e=s();return JSON.parse(M(e))},getResolvedConfig:function(){P();var e=c();return JSON.parse(M(e))},getPluginInfo:function(){var e,t=u(),n=JSON.parse(M(t));return n.fileNames=null!==(e=n.fileNames)&&void 0!==e?e:[],n},getLicenseText:function(){return M(g())},formatText:function(e,t,n){if(P(),null!=n){if(2===v)throw new Error("Cannot set the override configuration for this old plugin.");S(JSON.stringify(n)),o()}S(e),r(),S(t);var u=a();switch(u){case 0:return t;case 1:return M(i());case 2:throw new Error(M(f()));default:throw new Error("Unexpected response code: ".concat(u))}}};function P(){w||O({},{})}function O(e,t){null!=y&&y(),S(JSON.stringify(e)),_(),S(JSON.stringify(t)),l(),w=!0}function S(e){var t=(new TextEncoder).encode(e),n=t.length;b(n);for(var r=0;r<n;){for(var o=Math.min(n-r,x),i=T(o),a=0;a<o;a++)i[a]=t[r+a];m(o),r+=o}}function M(e){for(var t=new Uint8Array(e),n=0;n<e;){var r=Math.min(e-n,x);p(n,r);for(var o=T(r),i=0;i<r;i++)t[n+i]=o[i];n+=r}return(new TextDecoder).decode(t)}function T(t){var n=d();return new Uint8Array(e.exports.memory.buffer,n,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.createFromInstance=t.createFromBuffer=t.createStreaming=t.createImportObject=void 0,t.createImportObject=r,t.createStreaming=function(e){return null==WebAssembly.instantiateStreaming||null!=typeof(null===globalThis||void 0===globalThis?void 0:globalThis.Deno)?function(){return t(e)?e.arrayBuffer():e.then((function(e){return e.arrayBuffer()}));function t(e){return null!=e.arrayBuffer}}().then((function(e){return o(e)})):WebAssembly.instantiateStreaming(e,{dprint:{host_clear_bytes:function(){},host_read_buffer:function(){},host_write_buffer:function(){},host_take_file_path:function(){},host_take_override_config:function(){},host_format:function(){return 0},host_get_formatted_text:function(){return 0},host_get_error_text:function(){return 0}}}).then((function(e){return i(e.instance)}))},t.createFromBuffer=o,t.createFromInstance=i},function(e,t,n){"use strict";n.r(t);var r,o,i,a=n(0),f=new AbortController;function u(e,t){!function(e){try{e()}catch(t){s(t)}}((function(){return e.setConfig({},t)}))}function c(e,t,n){var r;try{r=e.formatText(t,n)}catch(o){r=o.message}postMessage({type:"Format",text:r})}function s(e){postMessage({type:"Error",message:e.message})}onmessage=function(e){switch(e.data.type){case"LoadUrl":!function(e){f.abort();var t=(f=new AbortController).signal;(r=fetch(e,{signal:t}).then((function(e){return e.arrayBuffer()})).then((function(e){var t=Object(a.createFromBuffer)(e);return postMessage({type:"PluginInfo",info:t.getPluginInfo()}),o&&u(t,o),i&&c(t,i.filePath,i.fileText),t}))).catch((function(e){t.aborted||s(e)}))}(e.data.url);break;case"SetConfig":_=e.data.config,o=_,r&&r.then((function(e){o&&u(e,o),i&&c(e,i.filePath,i.fileText)}));break;case"Format":t=e.data.filePath,n=e.data.fileText,i={filePath:t,fileText:n},r&&r.then((function(e){return c(e,t,n)}))}var t,n,_},addEventListener("message",(function(e){var n,r=e.data,o=r.type,i=r.method,a=r.id,f=r.params;"RPC"===o&&i&&((n=t[i])?Promise.resolve().then((function(){return n.apply(t,f)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:a,result:e})})).catch((function(e){var t={message:e};e.stack&&(t.message=e.message,t.stack=e.stack,t.name=e.name),postMessage({type:"RPC",id:a,error:t})}))})),postMessage({type:"RPC",method:"ready"})}]);
//# sourceMappingURL=b39be745c0f9e887b44f.worker.js.map